(()=>{var Mt=Object.defineProperty;var Yt=(n,t,e)=>t in n?Mt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var xt=(n,t)=>{for(var e in t)Mt(n,e,{get:t[e],enumerable:!0})};var Q=(n,t,e)=>(Yt(n,typeof t!="symbol"?t+"":t,e),e);var zt={};xt(zt,{State:()=>k,StatefulAsyncFunction:()=>Ae,StatefulAsyncScript:()=>nt,StatefulModule:()=>it});var ot=(n,...t)=>{let e=t.pop();return n.constructor.name==="AsyncFunction"?W(n.call(...t),e):e(n.call(...t))},W=(n,t)=>n instanceof Promise?n.then(t):t(n),It=n=>typeof n=="object"&&n||typeof n=="function";function Dt(n){let t=typeof n[n.length-1]=="object"?n.pop():{},e=n.pop()||"";return t.functionParams=n,{source:e,params:t}}var Bt={};function Ut(...n){let t,e={runtimeParams:ee,compilerParams:te,parserParams:Zt};for(;t=n.shift();){let{runtimeParams:r={},compilerParams:{globalsNoObserve:i=[],globalsOnlyPathsExcept:o=[],...s}={},parserParams:u={}}=t;e={runtimeParams:{...e.runtimeParams,...r},compilerParams:{...e.compilerParams,globalsNoObserve:[...e.compilerParams.globalsNoObserve,...i],globalsOnlyPathsExcept:[...e.compilerParams.globalsOnlyPathsExcept,...o],...s},parserParams:{...e.parserParams,...u}},n.devMode}return e}var Zt={ecmaVersion:"latest",allowReturnOutsideFunction:!0,allowAwaitOutsideFunction:!1,allowSuperOutsideMethod:!1,preserveParens:!1,locations:!0},te={globalsNoObserve:["arguments","debugger"],globalsOnlyPathsExcept:[],originalSource:!0,locations:!0,compact:2},ee={apiVersion:3};var Nt={};xt(Nt,{apply:()=>lt,batch:()=>jt,construct:()=>Rt,defineProperties:()=>_e,defineProperty:()=>kt,deleteProperties:()=>Oe,deleteProperty:()=>dt,get:()=>S,getOwnPropertyDescriptor:()=>Et,getOwnPropertyDescriptors:()=>we,getPrototypeOf:()=>$t,has:()=>ht,intercept:()=>be,isExtensible:()=>Tt,observe:()=>Gt,ownKeys:()=>mt,path:()=>xe,preventExtensions:()=>St,reduce:()=>qt,set:()=>K,setPrototypeOf:()=>Ct});function _(n){return!Array.isArray(n)&&typeof n=="object"&&n}function V(n){return typeof n}function T(n){return Array.isArray(n)}function bt(n,t,e=null){return T(t)?n.filter(r=>e?t.filter(i=>e(r,i)).length:t.indexOf(r)!==-1):[]}function ut(n,...t){if(globalThis.webqit||(globalThis.webqit={}),globalThis.webqit.refs||Object.defineProperty(globalThis.webqit,"refs",{value:new X}),!arguments.length)return globalThis.webqit.refs;let e=globalThis.webqit.refs.get(n);e||(e=new X,globalThis.webqit.refs.set(n,e));let r,i;for(;r=t.shift();)(i=e)&&!(e=e.get(r))&&(e=new X,i.set(r,e));return e}var X=class extends Map{constructor(...t){super(...t),this.observers=new Set}set(t,e){let r=super.set(t,e);return this.fire("set",t,e,t),r}delete(t){let e=super.delete(t);return this.fire("delete",t),e}has(t){return this.fire("has",t),super.has(t)}get(t){return this.fire("get",t),super.get(t)}keyNames(){return Array.from(super.keys())}observe(t,e,r){let i={type:t,key:e,callback:r};return this.observers.add(i),()=>this.observers.delete(i)}unobserve(t,e,r){if(Array.isArray(t)||Array.isArray(e))throw new Error('The "type" and "key" arguments can only be strings.');for(let i of this.observers)!(st([t,"*"],i.type)&&st([e,"*"],i.key)&&i.callback===r)||this.observers.delete(i)}fire(t,e,...r){for(let i of this.observers)!(st([t,"*"],i.type)&&st([e,"*"],i.key))||i.callback(...r)}},st=(n,t)=>Array.isArray(t)?bt(n,t).length:n.includes(t);function H(n){return typeof n=="function"}function wt(n){return n===null||n===""}function M(n){return arguments.length&&(n===void 0||typeof n>"u")}function v(n){return Array.isArray(n)||typeof n=="object"&&n||H(n)}function _t(n){return wt(n)||M(n)||n===!1||n===0||v(n)&&!Object.keys(n).length}function R(n){return H(n)||n&&{}.toString.call(n)==="[object function]"}function ft(n){return n instanceof String||typeof n=="string"&&n!==null}function Ot(n){return!ft(n)&&!M(n.length)}function N(n,t=!0){return T(n)?n:!t&&_(n)?[n]:n!==!1&&n!==0&&_t(n)?[]:Ot(n)?Array.prototype.slice.call(n):_(n)?Object.values(n):[n]}var g=(...n)=>ut("observer-api",...n),J=(n,t)=>n instanceof Promise?n.then(t):t(n),at={};var I=class{constructor(t,e){this.registry=t,Object.assign(this,{...e,target:t.target}),this.params.signal&&this.params.signal.addEventListener("abort",()=>this.remove())}remove(){return this.removed=!0,this.registry.removeRegistration(this)}};var Y=class extends I{constructor(){super(...arguments),this.emit.currentRegistration=this,Object.defineProperty(this,"abortController",{value:new AbortController}),Object.defineProperty(this,"signal",{value:this.abortController.signal}),at.setMaxListeners?.(0,this.signal)}remove(){this.abortController.abort(),super.remove()}fire(t){if(this.emit.recursionTarget&&!["inject","force-async","force-sync"].includes(this.params.recursions))return;let e=t,r=this.filter;if(r!==1/0&&(r=N(r,!1))&&(e=t.filter(i=>r.includes(i.key))),this.params.diff&&(e=e.filter(i=>i.type!=="set"||i.value!==i.oldValue)),e.length){if(this.emit.recursionTarget&&this.params.recursions!=="force-sync"){this.emit.recursionTarget.push(...e);return}this.emit.recursionTarget=this.params.recursions==="inject"?e:[];let i=this.filter===1/0||Array.isArray(this.filter)?this.emit(e,this):this.emit(e[0],this);return J(i,o=>{let s=this.emit.recursionTarget;return delete this.emit.recursionTarget,this.params.recursions==="force-async"&&s.length?this.emit.currentRegistration.fire(s):o})}}};var D=class{constructor(t){this.target=t,this.entries=[]}addRegistration(t){return this.entries.push(t),t}removeRegistration(t){this.entries=this.entries.filter(e=>e!==t)}static _getInstance(t,e,r=!0,i=this.__namespace){if(!v(e))throw new Error(`Subject must be of type object; "${V(e)}" given!`);let o=this;return i&&g("namespaces").has(t+"-"+i)&&(o=g("namespaces").get(t+"-"+i),t+="-"+i),!g(e,"registry").has(t)&&r&&g(e,"registry").set(t,new o(e)),g(e,"registry").get(t)}static _namespace(t,e,r=null){if(t+="-"+e,arguments.length===2)return g("namespaces").get(t);if(!(r.prototype instanceof this))throw new Error(`The implementation of the namespace ${this.name}.${e} must be a subclass of ${this.name}.`);g("namespaces").set(t,r),r.__namespace=e}};var P=class{constructor(t,e){if(this.target=t,!e.type)throw new Error("Descriptor type must be given in definition!");Object.assign(this,e)}};var F=class extends D{static getInstance(t,e=!0,r=null){return super._getInstance("listeners",...arguments)}static namespace(t,e=null){return super._namespace("listeners",...arguments)}constructor(t){super(t),this.batches=[]}addRegistration(t,e,r){return super.addRegistration(new Y(this,{filter:t,emit:e,params:r}))}emit(t,e=!1){if(this.batches.length){this.batches[0].events.push(...t);return}let r;this.entries.forEach(i=>{if(e&&!i.params.propertyDescriptors){r=r||t.map(o=>{let{target:s,value:u,oldValue:f,type:a,...c}=o;return u=u.get?u.get():u.value,f=f?.get?f.get():f?.value,new P(s,{type:"set",value:u,oldValue:f,...c})}),i.fire(r);return}i.fire(t)})}batch(t){this.batches.unshift({entries:[...this.entries],events:[]});let e=t();return J(e,r=>{let i=this.batches.shift();return i.events.length&&i.entries.forEach(o=>o.fire(i.events)),r})}};var Z=class extends I{exec(t,e,r){return this.running||!this.traps[t.type]?e(...Array.prototype.slice.call(arguments,2)):(this.running=!0,this.traps[t.type](t,r,(...i)=>(this.running=!1,e(...i))))}};var C=class extends D{static getInstance(t,e=!0,r=null){return super._getInstance("traps",...arguments)}static namespace(t,e=null){return super._namespace("traps",...arguments)}addRegistration(t){return super.addRegistration(new Z(this,t))}emit(t,e=null){let r=this;return function i(o,...s){let u=r.entries[o];return u?u.exec(t,(...f)=>i(o+1,...f),...s):e?e(t,...s):s[0]}(0)}};var At={};xt(At,{accessorize:()=>ge,proxy:()=>Kt,unaccessorize:()=>ye,unproxy:()=>pt});function ge(n,t,e={}){n=ct(n);let r=g(n,"accessorizedProps");function i(f){let a,c=n;do a=Object.getOwnPropertyDescriptor(c,f);while(!a&&(c=Object.getPrototypeOf(c)));return a?{proto:c,descriptor:a}:{descriptor:{value:void 0,configurable:!0,enumerable:!0,writable:!0}}}function o(f){if(r.has(f+""))return!0;let a=i(f);a.getValue=function(p=!1){return p?this.descriptor:this.descriptor.get?this.descriptor.get():this.descriptor.value},a.setValue=function(p,y=!1){if(this.dirty=!0,y){this.descriptor=p;return}return this.descriptor.set?this.descriptor.set(p)!==!1:(this.descriptor.value=p,!0)},a.intact=function(){let p=Object.getOwnPropertyDescriptor(n,f);return p?.get===l.get&&p?.set===l.set&&r.get(f+"")===this},a.restore=function(){return this.intact()?(this.proto&&this.proto!==n||!this.proto&&!this.dirty?delete n[f]:Object.defineProperty(n,f,this.descriptor),r.delete(f+""),!0):!1},r.set(f+"",a);let{enumerable:c=!0}=a.descriptor,l={enumerable:c,configurable:!0};("value"in a.descriptor||a.descriptor.set)&&(l.set=function(p){return K(this,f,p,e)}),("value"in a.descriptor||a.descriptor.get)&&(l.get=function(){return S(this,f,e)});try{return Object.defineProperty(n,f,l),!0}catch{return r.delete(f+""),!1}}let u=(Array.isArray(t)?t:t===void 0?Object.keys(n):[t]).map(o);return t===void 0||Array.isArray(t)?u:u[0]}function ye(n,t,e={}){n=ct(n);let r=g(n,"accessorizedProps");function i(u){return r.has(u+"")?r.get(u+"").restore():!0}let s=(Array.isArray(t)?t:t===void 0?Object.keys(n):[t]).map(i);return t===void 0||Array.isArray(t)?s:s[0]}function Kt(n,t={},e=void 0){let r=ct(n);if(typeof t.membrane=="boolean")throw new Error("The params.membrane parameter cannot be of type boolean.");if(t.membrane&&g(r,"membraneRef").has(t.membrane))return g(r,"membraneRef").get(t.membrane);let i={apply(u,f,a){if(Array.isArray(f)){let c=ct(f);return g(c).set("$length",c.length),jt(c,()=>lt(u,f,a))}return lt(u,f,a)},construct:(u,f,a=null)=>Rt(u,f,a,t),defineProperty:(u,f,a)=>kt(u,f,a,t),deleteProperty:(u,f)=>dt(u,f,t),get:(u,f,a=null)=>{let c={...t,receiver:a};Array.isArray(u)&&f==="length"&&g(u).has("$length")&&(c.forceValue=g(u).get("$length"));let l=S(u,f,c);return Array.isArray(u)&&typeof l=="function"?Kt(l,{...t,membrane:a}):l},getOwnPropertyDescriptor:(u,f)=>Et(u,f,t),getPrototypeOf:u=>$t(u,t),has:(u,f)=>ht(u,f,t),isExtensible:u=>Tt(u,t),ownKeys:u=>mt(u,t),preventExtensions:u=>St(u,t),set:(u,f,a,c=null)=>{let l={...t,receiver:c};return Array.isArray(u)&&f==="length"&&(l.forceOldValue=g(u).get("$length"),g(u).set("$length",a)),K(u,f,a,l)},setPrototypeOf:(u,f)=>Ct(u,f,t)},o=e?.(i)||i,s=new Proxy(r,o);return t.membrane&&g(r,"membraneRef").set(t.membrane,s),g(s).set(s,r),s}function pt(n){return g(n).get(n)||n}function ct(n){if(!n||!v(n))throw new Error("Target must be of type object!");return pt(n)}var tt=class extends Array{};function xe(...n){return new tt(...n)}function qt(n,t,e,r=o=>o,i={}){if(!!t.length)return function o(s,u,f){let a=u[f.level],c=f.level===u.length-1;return s instanceof P&&s.type!=="get"?f={...f,probe:"always"}:f.probe!=="always"&&(f={...f,probe:!c}),e(s,a,(l,...p)=>{let y=d=>{d instanceof P&&(d.path=[d.key],s instanceof P&&(d.path=s.path.concat(d.key),Object.defineProperty(d,"context",{get:()=>s,configurable:!0})))},O=d=>{let x=z(d,!1);return J(x,m=>{d instanceof P?d.value=m:d=m;let b=p[0]||{};return o(d,u,{...f,...b,level:f.level+1})})};return gt(a)&&Array.isArray(l)?(l.forEach(y),c?r(l,...p):l.map(O)):(y(l),c?r(l,...p):O(l))},f)}(n,t.slice(0),{...i,level:0})}function Gt(n,t,e,r={}){if(n=z(n,!r.level),R(arguments[1])&&([,e,r={}]=arguments,t=1/0),!R(e))throw new Error(`Handler must be a function; "${V(e)}" given!`);if(t instanceof tt)return qt(n,t,Gt,e,r);if(r={...r,descripted:!0},delete r.live,!v(n))return r.probe&&S(n,t,e,r);let i=Qt(n,t,e,r);return r.probe?S(n,t,i,r):i()}function be(n,t,e={}){return n=z(n),_(t)||([,,,e={}]=arguments,t={[arguments[1]]:arguments[2]}),C.getInstance(n,!0,e.namespace).addRegistration({traps:t,params:e})}function Et(n,t,e=i=>i,r={}){return j(n,"getOwnPropertyDescriptor",{key:t},e,r)}function we(n,t,e=i=>i,r={}){return j(n,"getOwnPropertyDescriptors",{key:t},e,r)}function $t(n,t=r=>r,e={}){return j(n,"getPrototypeOf",{},t,e)}function Tt(n,t=r=>r,e={}){return j(n,"isExtensible",{},t,e)}function mt(n,t=r=>r,e={}){return j(n,"ownKeys",{},t,e)}function ht(n,t,e=i=>i,r={}){return j(n,"has",{key:t},e,r)}function S(n,t,e=i=>i,r={}){let i,o=z(n,!r.level);return _(e)?[r,e]=[e,s=>s]:r.live&&(i=!0),t instanceof tt?qt(o,t,S,e,r):ve(o,t,s=>{let u=[...s];return function f(a,c,l){if(!c.length)return l(a);let p=c.shift();if(!["string","number","symbol"].includes(typeof p))throw new Error(`Property name/key ${p} invalid.`);function y(x,m=void 0){let b=$=>(x.value=$,f([...a,r.live||r.descripted?x:$],c,l));if(arguments.length>1)return b(m);let w=g(o,"accessorizedProps",!1),E=w&&w.get(x.key+"");if(E&&E.intact())return b(E.getValue(r.propertyDescriptor));if(r.propertyDescriptor){let $=Object.getOwnPropertyDescriptor(o,x.key);return"forceValue"in r&&"value"in $&&($.value=r.forceValue),b($)}return"forceValue"in r?b(r.forceValue):b(Reflect.get(o,x.key,...r.receiver?[r.receiver]:[]))}let O=new P(o,{type:"get",key:p,value:void 0,related:u});if(!v(o))return f([...a,r.live||r.descripted?O:void 0],c,l);let d=C.getInstance(o,!1,r.namespace);return d?d.emit(O,y):y(O)}([],s.slice(0),f=>{let a=gt(t)?f:f[0];return i&&v(o)?Qt(o,t,e,r)(a):e(a)})},r)}function jt(n,t,e={}){return n=z(n),F.getInstance(n,!0,e.namespace).batch(t)}function K(n,t,e,r=s=>s,i={},o=!1){let s=z(n),u=[[t,e]];_(t)&&([,,r=a=>a,i={},o=!1]=arguments,u=Object.entries(t)),_(r)&&([o,i,r]=[typeof i=="boolean"?i:!1,r,a=>a]);let f=u.map(([a])=>a);return function a(c,l,p){if(!l.length)return p(c);let[y,O]=l.shift();function d(m,b=void 0){let w=Xt=>(m.status=Xt,a(c.concat(m),l,p));if(arguments.length>1)return w(m,b);let E=g(s,"accessorizedProps",!1),$=E&&E.get(m.key+"");return m.type==="defineProperty"?($&&!$.restore()&&w(!1),Object.defineProperty(s,m.key,m.value),w(!0)):$&&$.intact()?w($.setValue(m.value)):w(Reflect.set(s,m.key,m.value))}function x(m,b){if(i.diff&&O===b)return a(c,l,p);let w=new P(s,{type:o?"defineProperty":"set",key:y,value:O,isUpdate:m,oldValue:b,related:[...f],detail:i.detail}),E=C.getInstance(s,!1,i.namespace);return E?E.emit(w,d):d(w)}return ht(s,y,m=>{if(!m)return x(m);let b={...i,propertyDescriptor:o};return"forceOldValue"in i&&(b.forceValue=i.forceOldValue),S(s,y,w=>x(m,w),b)},i)}([],u.slice(0),a=>{let c=F.getInstance(s,!1,i.namespace);return c&&c.emit(a,o),r(gt(t)?a.map(l=>l.status):a[0]?.status)})}function kt(n,t,e,r=o=>o,i={}){return K(n,t,e,r,i,!0)}function _e(n,t,e=i=>i,r={}){return K(n,t,e,r,!0)}function dt(n,t,e=i=>i,r={}){n=z(n),_(e)&&([r,e]=[e,s=>s]);let i=N(t,!1),o=[...i];return function s(u,f,a){if(!f.length)return a(u);let c=f.shift();function l(y,O=void 0){let d=b=>(y.status=b,s(u.concat(y),f,a));if(arguments.length>1)return d(y,O);let x=g(n,"accessorizedProps",!1),m=x&&x.get(y.key+"");return m&&!m.restore()&&d(!1),d(Reflect.deleteProperty(n,y.key))}function p(y){let O=new P(n,{type:"deleteProperty",key:c,oldValue:y,related:[...o],detail:r.detail}),d=C.getInstance(n,!1,r.namespace);return d?d.emit(O,l):l(O)}return S(n,c,p,r)}([],i.slice(0),s=>{let u=F.getInstance(n,!1,r.namespace);return u&&u.emit(s),e(gt(t)?s.map(f=>f.status):s[0].status)})}function Oe(n,t,e=i=>i,r={}){return dt(...arguments)}function Rt(n,t,e=null,r=o=>o,i={}){return j(n,"construct",arguments.length>2?{argumentsList:t,newTarget:e}:{argumentsList:t},r,i)}function lt(n,t,e,r=o=>o,i={}){return j(n,"apply",{thisArgument:t,argumentsList:e},r,i)}function Ct(n,t,e=i=>i,r={}){return j(n,"setPrototypeOf",{proto:t},e,r)}function St(n,t=r=>r,e={}){return j(n,"preventExtensions",{},t,e)}function Qt(n,t,e,r={}){let i;r.signal||(i=new AbortController,r={...r,signal:i.signal},at.setMaxListeners?.(0,i.signal));let o=F.getInstance(n,!0,r.namespace);return function s(u,f=null){f?.remove();let c={signal:o.addRegistration(t,s,r).signal};if(arguments.length){let l=e(u,c);if(arguments.length>1)return l}return i}}function j(n,t,e={},r=o=>o,i={}){n=z(n),_(r)&&([i,r]=[r,f=>f]);function o(f,a){return arguments.length>1?r(a):r(Reflect[t](n,...Object.values(e)))}let s=new P(n,{type:t,...e}),u=C.getInstance(n,!1,i.namespace);return u?u.emit(s,o):o(s)}function gt(n){return n===1/0||Array.isArray(n)}function z(n,t=!0){if((!n||!v(n))&&t)throw new Error(`Object must be of type object or array! "${V(n)}" given.`);return n instanceof P&&(n=n.value),n&&pt(n)}function ve(n,t,e,r={}){return t===1/0?r.level&&!v(n)?e([]):mt(n,e,r):e(N(t,!1))}var Pe={...Nt,...At},h=Pe;var B=class extends EventTarget{managedAlways=new Set;managedOnce=new Set;constructor(){super(),Bt.setMaxListeners?.(0,this)}fire(t){return this.dispatchEvent(new Event(t,{cancelable:!0}))}on(...t){return this.addEventListener(...t),()=>this.removeEventListener(...t)}abort(t=!1){this.managedAlways.forEach(e=>e.abort?e.abort(t):e(t)),this.managedOnce.forEach(e=>e.abort?e.abort(t):e(t)),this.managedOnce.clear(),this.fire("abort")}manage(t){this.managedAlways.add(t)}once(t){this.managedOnce.add(t)}};var q=class extends B{state;constructor(t,e,r,i,o,s){super(),t?.once(this),this.context=t,this.type=e,this.spec=r,this.scope=o,t?.scope!==o&&this.manage(o),this.serial=i,this.closure=s,t?.type==="iteration"?this.path=t.path.concat(this.spec.index):t?.type==="round"?this.path=t.path.concat(this.serial):this.path=(t?.path||[]).slice(0,-1).concat(this.serial),this.flowControl=new Map}get runtime(){return this.context.runtime}contains(t){return this===t.context||t.context&&this.contains(t.context)}order(t){if(!t)return this;let[e,r]=t.path.length<this.path.length?[t,this]:[this,t];return e.path.reduce((i,o,s)=>i&&o<=r.path[s],!0)&&e||r}execute(t=null){let e=this.before(),r=this===this.runtime||!this.context?[this]:this.spec.args||[];return ot(this.closure,void 0,...r,i=>(this.spec.complete&&(i=this.spec.complete(i,this)),this.after(e),t?t(i,this):i))}continue(t){return this.apply("continue",t)}break(t){return this.apply("break",t)}return(t){return this.apply("return",t)}flowControlApplied(t,e){return arguments.length?arguments.length===1?this.flowControl.has(t):this.flowControl.get(t)?.arg===e:this.flowControl.size}apply(t,e,r=!1){let i=this.flowControl.size;if(r?this.flowControl.delete(t):this.flowControl.set(t,{arg:e}),this.type==="round"&&(this.context.breakpoint=this),this.type==="round"&&["break","continue"].includes(t)&&e===this.context?.spec.label){r||(this.flowControl.get(t).endpoint=!0),this.state!=="running"&&this.handleRestRounds(this.flowControl.size,i);return}this.state!=="running"&&(this.handleRestBlock(this.flowControl.size,i),this.hoist(...arguments))}hoist(...t){return this.context?.apply(...t)}handleRestBlock(t,e){let r;this.type!=="block"||!(r=this.context?.restBlock)||(t?r.abort():e&&(r.state="resuming",this.runtime.schedule(r)))}handleRestRounds(t,e){if(this.type!=="round")return;let r=this,i=new Set;for(;r=r.nextRound;)t?r.abort():e&&r.state!=="inert"&&(r.state="resuming",i.add(r));i.size&&this.runtime.schedule(...i)}before(){this.state="running";let t=this.flowControl;return this.flowControl=new Map,t}after(t){this.state="complete";let e=this.flowControl;this.handleRestBlock(e.size,t.size),this.handleRestRounds(e.size,t.size);for(let r of["break","continue","return"])e.has(r)&&!e.get(r).endpoint?this.hoist(r,e.get(r).arg):t.has(r)&&!t.get(r).endpoint&&this.hoist(r,t.get(r).arg,!0)}abort(t=!1){return t&&(this.context?.breakpoint===this&&delete this.context.breakpoint,this.flowControl.clear()),this.state=t?"inert":"aborted",super.abort(t)}};var U=class extends B{subscribers=new Set;signals=new Map;constructor(t,e){super(),this.context=t,this.context?.once(()=>this.abort()),this.once(()=>this.watchMode(!1)),this.state=e}get name(){return[...this.context?.signals.keys()||[]].find(t=>this.context.signals.get(t)===this)}signal(t){let e=this.signals.get(t);return e||(e=new U(this,this.type==="objects"?t:typeof this.state=="object"&&this.state?h.get(this.state,t):void 0),this.signals.set(t,e),this.signals.size===1&&this.watchMode(),e.once(()=>{this.signals.delete(t),this.signals.size||this.watchMode(!1)})),e}subscribe(t){this.subscribers.add(t),t.once(()=>{this.subscribers.delete(t),this.subscribers.size||this.abort()})}watchMode(t=!0){this.mutationsWatch?.abort(),!(!t||!this.signals.size||!It(this.state))&&(this.mutationsWatch=h.observe(this.state,e=>{let r={map:new Map,add(o,s){for(let u of o)u.spec.beforeSchedule?.(s)!==!1&&(this.map.has(u.runtime)||this.map.set(u.runtime,new Set),this.map.get(u.runtime).add(u))}};for(let o of e){let s=this.signals.get(o.key);!s||(r.add(s.subscribers,o),s.refresh(o.value))}let i=r.map.size?[...r.map].sort((o,s)=>o.$serial>s.$serial?-1:1):r.map;for(let[o,s]of i)o.state!=="aborted"&&o.schedule(...s)},{recursions:"force-sync"}))}refresh(t){this.state=t;for(let[e,r]of this.signals)r.refresh(h.get(this.state??{},e));this.watchMode()}};var A=class extends U{symbols=new Map;constructor(t,e,r=void 0){super(t,r||Object.create(null)),this.type=e}};var et=class extends q{rounds=new Map;constructor(t,e,r,i,o,s){let u=s.constructor.name==="AsyncFunction";r.iteratee&&(r.$closure=s,s=u?async()=>{await this.iterate()}:()=>{this.iterate()}),super(t,e,r,i,o,s),this.async=u,this.manage(()=>{delete this.breakpoint,this.rounds.clear()})}add(t,e){return this.rounds.set(t,e),this.lastRound&&(this.lastRound.nextRound=e,e.prevRound=this.lastRound),this.lastRound=e,e}createRound(t){let e=this.rounds.size,r=new A(this.scope,"round",{[this.spec.production]:t}),i=new q(this,"round",{index:e},this.serial,r,this.spec.$closure);return this.add(this.spec.kind==="for-in"?t:e,i)}async iterate(){if(this.iteratee=this.spec.iteratee(),this.spec.kind==="for-in"){let t;for(let e in this.iteratee){let r=this.createRound(e);if(!t){if(this.async?await this.runtime.push(r):this.runtime.push(r),this.hardBreak())break;this.terminated()&&(t=!0)}}this.watchMode()}if(this.spec.kind==="for-of"){let t;for(let e of this.iteratee){let r=this.createRound(e);if(!t){if(this.async?await this.runtime.push(r):this.runtime.push(r),this.hardBreak())break;this.terminated()&&(t=!0)}}this.watchMode()}}terminated(){return this.breakpoint&&!this.breakpoint.flowControlApplied("continue",this.spec.label)&&this.breakpoint.flowControlApplied()}hardBreak(){return this.terminated()&&this.runtime.$params.experimentalFeatures===!1}watchMode(){let t=e=>{let r=new Set;for(let i of e){if(Array.isArray(this.iteratee)&&i.key==="length")continue;let o=this.spec.kind==="for-in"?i.key:i.value,s=this.spec.kind==="for-in"?i.key:parseInt(i.key),u=this.rounds.get(s),f;u?(h.set(u.scope.state,this.spec.production,o),i.type==="deleteProperty"?u.abort(!0):u.state==="inert"&&(u.state="resuming",f=u)):i.type!=="deleteProperty"&&(f=this.createRound(o)),f&&!this.terminated()&&r.add(f)}r.size&&this.runtime.schedule(...r)};this.once(h.observe(this.iteratee,t))}};var rt=Object.create(null);var k=class{constructor(t){Object.defineProperty(this,"runtime",{value:t});let e={statechange:()=>{h.defineProperty(this,"value",{value:t.flowControl.get("return")?.arg,enumerable:!0,configurable:!0})}};for(let r in e)t.on(r,e[r]),e[r]();t.$params.sourceType==="module"&&Object.defineProperty(this,"exports",{value:t.exports})}dispose(){return this.runtime.abort()}};var L=class extends q{locations=[];queue=new Set;thread=[];constructor(t,e,r,i,o){super(t,e,{},-1,i,o);let{$serial:s=0,...u}=r;this.$serial=s,this.$params=u,this.$objects=new A(void 0,"objects"),this.manage(this.$objects),this.exports=Object.create(null),this.$promises={imports:[],exports:[]},this.manage(()=>{h.deleteProperties(this.exports,Object.keys(this.exports)),this.$promises.imports.splice(0),this.$promises.exports.splice(0)})}extractSource(t,e=!1){let[[r,i,o],[s]]=this.locations[t],u=this.$params.originalSource.slice(r,s);return e?{expr:u,line:i,column:o}:u}throw(t,e,r=null,i=null){let o,s=i!==null?`[${i}]: ${t}`:t,u=e.map(a=>a!==-1&&this.extractSource(a,!0)).filter(a=>a);u.push({source:this.$params.originalSource}),o=new(r||Error)(s,{cause:u});let f=this.$params.sourceType==="module"&&this.$params.experimentalFeatures!==!1&&this.$params.packageName||this.$params.fileName;throw f&&(o.fileName=f),i&&(o.code=i),o}push(t,e=null){return this.thread.unshift(t),t.execute(r=>(this.thread.shift(),e?.(r),r));try{}catch(r){if(r.cause&&r.trace)throw r;let i=`${r.message||r}`;this.throw(i,[t.serial,t.context?.serial],globalThis[r.name])}}get runtime(){return this}get nowRunning(){return this.thread[0]}schedule(...t){let e=this.queue.size;for(let r of t)this.queue.add(r);if(!e)return this.flowControlDirty=!1,function r(i,o){let s;for(let u of this.queue){if(o&&o.order(u)!==o||u.state==="aborted"){this.queue.delete(u);continue}s=s?s.order(u):u,o||(o=s)}return s?(s.abort(),this.push(s,u=>(this.queue.delete(s),r.call(this,u,s)))):(this.fire(this.flowControlApplied()?"statechange":"reflection"),i)}.call(this,void 0,this.nowRunning)}let(t,e,r){return this.var(t,e,r,"let")}var(t,e,r,i="var"){r||(r=()=>{});let o=(s,u)=>{let f=i==="var"?this.scope:u.scope;for(;i==="var"&&!["module","function"].includes(f.type)&&!h.has(f.state,t)&&f.context;)f=f.context;let a=f.symbols.get(t);if(a&&(a.kind!==i||i==="let"&&a.serial!==e))throw new Error(`Identifier "${t}" has already been declared.`);return f.symbols.set(t,{serial:e,kind:i}),h.set(f.state,t,s),s};return this.autorun(i,{complete:o},e,r)}update(t,e,r=!0){let i=this.nowRunning?.scope||this.scope;for(;i&&!h.has(i.state,t);)i=i.context;if(!i)throw new ReferenceError(`${t} is not defined.`);let o=h.get(i.state,t);return ot(e,void 0,o,s=>(h.set(i.state,t,s),r?s:o))}ref(t,e=0){let r=this.nowRunning,i=r?.scope||this.scope;for(;i&&!h.has(i.state,t);)i=i.context;if(!i)throw new ReferenceError(`${t} is not defined.`);return this.autobind(r,i.signal(t),e)}obj(t,e){return this.autobind(this.nowRunning,this.$objects.signal(t),e)}autobind(t,e,r){return t.state==="aborted"?e.state:function i(o,s){if(t&&o.subscribe(t),!s||!o.state||typeof o.state!="object")return typeof o.state=="function"?h.proxy(o.state,{membrane:o}):o.state;let u;return h.proxy(o.state,{},f=>({...f,get(a,c,l=null){return u?f.get(a,c,l):(u=!0,i(o.signal(c),s-1))}}))}(e,r)}autorun(t,...e){let r=e.pop(),i=e.pop(),o=e.pop()||{},s=this.nowRunning||this,u=q;t==="iteration"&&(u=et);let f=s.scope;["block","round"].includes(t)&&(f=new A(s.scope,t));let a=new u(s,t,o,i,f,r);if(!(t==="round"&&(s.add(o.index,a),s.terminated()))&&!(t==="rest"&&(s.restBlock=a,s.flowControlApplied())))return this.push(a)}run(t,e){let r={$serial:this.$serial+1,...this.$params},i=this.nowRunning||this,o=new A(i.scope,"function"),s=new L(i,"function",r,o,e);return s.execute(u=>t?new k(s):u)}function(t,e,r,i){if(t){let s=this.nowRunning?.scope||this.scope;h.set(s.state,i.name,i)}let o=this;return Object.defineProperty(i,"toString",{value:function(s=!1){if(s&&e)return Function.prototype.toString.call(i);let u=o.extractSource(r);return u.startsWith("static ")?u.replace("static ",""):u}}),i}class(t,e,r){if(t){let i=this.nowRunning?.scope||this.scope;h.set(i.state,e.name,e)}return r.forEach(({name:i,static:o,isStatefulFunction:s,serial:u})=>{this.function(!1,s,u,o?e[i]:e.prototype[i])}),e}async import(...t){let e=t.pop(),r=typeof e=="string"?{source:e}:e,i;if(r.source.startsWith("#")&&this.$params.experimentalFeatures!==!1&&rt[r.source.slice(1)]?i=rt[r.source.slice(1)]:(i=(async()=>{let o=this.$params.sourceType==="module"&&this.$params.experimentalFeatures!==!1&&this.$params.packageName||this.$params.fileName;try{return await import(r.source)}catch(s){throw s.code==="ERR_MODULE_NOT_FOUND"&&this.throw(`Cannot find package "${r.source}"${o?` imported at "${o}"`:""}.`,[r.serial],null,s.code),s}})(),this.$promises[r.forExport?"exports":"imports"].push(i)),r.forExport)return i;this.assignModules(t,this.scope.state,await i,e.serial)}async export(...t){let e=Array.isArray(t[t.length-1])?null:t.pop();if(!e&&t[0].length===2&&typeof t[0][1]!="number"){for(let[i,o]of t)h.set(this.exports,o,i);return}let r=e?await this.import({...e,forExport:!0}):this.scope.state;this.assignModules(t,this.exports,r,e?.serial)}assignModules(t,e,r,i=null){let o=[];for(let[s,u,f]of t){if(s==="*"&&f){h.set(e,f,r);continue}h.has(r,s)||this.throw(`The requested module does not provide an export named "${s}".`,[u,i]),h.set(e,f||s,h.get(r,s)),o.push([s,u,f])}!o.length||this.once(h.observe(r,s=>{for(let[u,,f]of o)for(let a of s)u==="*"?h.set(e,a.key,a.value):a.key===u&&h.set(e,f||u,a.value)}))}after(...t){if(this.$params.sourceType==="module"&&this.$params.experimentalFeatures!==!1&&this.$params.packageName){if(this.$params.packageName.startsWith("#"))throw new Error('Experimental hot package names cannot start with a "#".');rt[this.$params.packageName]=this.exports,this.once(()=>{delete rt[this.$params.packageName]})}return super.after(...t)}};function yt(n,t,e,r){let{env:i,functionParams:o=[],packageName:s,fileName:u}=r,{parserParams:f,compilerParams:a,runtimeParams:c}=Ut(r);if(n==="module")f.sourceType=n,f.allowAwaitOutsideFunction=!0;else if(["function","async-function"].includes(n)){let p="  "+e.split(`
`).join(`
  `);e=`return ${n==="async-function"?"async ":""}function**(${o.join(", ")}) {
${p}
}`,a.startStatic=!0}else if(!["script","async-script"].includes(n))throw new Error(`Unrecognized sourceType specified: "${n}".`);a.sourceType=n;let l=t(e,{parserParams:f,compilerParams:a});if(l instanceof Promise&&!["async-function","async-script","module"].includes(n))throw new Error("Parse-compile can only return a Promise for sourceTypes: async-function, async-script, module.");return c.sourceType=n,c.packageName=s,c.fileName=u,W(l,p=>{let y=["async-script","module"].includes(n),d=((w,E)=>c.compileFunction?c.compileFunction(E,w):new(y?async function(){}.constructor:Function)(...w.concat(E)))([p.identifier+""],p+""),x="global",m=new A(void 0,x,globalThis);(n.endsWith("script")||i)&&(x="env",m=new A(m,x,i)),n==="module"&&(x="module",m=new A(m,x));let b=new L(void 0,x,{...c,originalSource:p.originalSource},m,d);return["function","async-function"].includes(n)?b.execute():{runtime:b,compiledSource:p}})}var G=class{constructor(...t){let e=this.constructor,r=typeof t[t.length-1]=="object"?t.pop():{},i=t.pop()||"";this.$program=yt(e.sourceType,e.parseCompileCallback,i,r)}execute(){return W(this.$program,({runtime:t})=>(t.abort(),t.execute(()=>new k(t))))}toString(t=!1){return W(this.$program,({compiledSource:e})=>t?e+"":e.originalSource)}};function Ae(...n){let{source:t,params:e}=Dt(n),r=yt("async-function",Ft,t,e);if(!(r instanceof Promise))return r;let i=async function(...o){return(await r).apply(this,...o)};return Object.defineProperty(i,"toString",{value:async function(...o){return(await r).toString(...o)}}),i}var nt=class extends G{};Q(nt,"sourceType","async-script"),Q(nt,"parseCompileCallback",Ft);var it=class extends G{};Q(it,"sourceType","module"),Q(it,"parseCompileCallback",Ft);function Ft(...n){let t=typeof n[n.length-1]=="object"?n.pop():{},e=n.pop()||"";if(globalThis.webqit?.$fCompiler){let{parse:r,compile:i}=globalThis.webqit.$fCompiler,o=r(e,t.parserParams);return i(o,t.compilerParams)}if(globalThis.webqit=globalThis.webqit||{},!globalThis.webqit.$fCompilerWorker){let o=`
        const compilerUrls = [ '${(document.querySelector('meta[name="$f-compiler-url"]')?.content.split(",")||[]).concat("https://unpkg.com/@webqit/stateful-functions/dist/compiler.js").join("','")}' ];
        ( function importScript() {
            try { importScripts( compilerUrls.shift().trim() ) } catch( e ) { if ( compilerUrls.length ) { importScript(); } }
        } )();
        const { parse, compile } = globalThis.webqit.$fCompiler;
        globalThis.onmessage = e => {
            const { source, params } = e.data;
            const ast = parse( source, params.parserParams );
            const compilation = compile( ast, params.compilerParams );
            e.ports[ 0 ]?.postMessage( compilation );
        };`;globalThis.webqit.$fCompilerWorker=new Worker(`data:text/javascript;base64,${btoa(o)}`)}return new Promise(r=>{let i=new MessageChannel;webqit.$fCompilerWorker.postMessage({source:e,params:t},[i.port2]),i.port1.onmessage=o=>r(o.data)})}globalThis.webqit||(self.webqit={});Object.assign(globalThis.webqit,zt);})();
//# sourceMappingURL=main.async.js.map
