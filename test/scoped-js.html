<!DOCTYPE html>
<html>
    <head>
        <meta name="reflex-compiler-url" content="http://127-.0.0.1:5500/reflex/di---st/compiler.js" />
        <script src="http://127.0.0.1:5500/reflex/dist/lite.js"></script>
    </head>
    <body>

        <script type="module">
            window.extVar = 2;
            let sum = webqit.ReflexFunction( `a`, `b`, `return a + b;` );
            let sum2 = webqit.ReflexFunction( `a2`, `b2`, `
                let c = a2 * b2;
                console.log('args', arguments);
                return c * extVar;
            `, { runtimeParams: { apiVersion: 2 } } );

            console.log( `\n----------------------\n` );
            console.log( `PROPS: `, await webqit.ReflexFunction.inspect( sum ) );
            console.log( 'SOURCE: ', sum.toString() );
            const result = await sum( 10, 5 );
            console.log( 'RESULT: ', result );
            
            console.log( `\n----------------------\n` );
            console.log( `PROPS: `, await webqit.ReflexFunction.inspect( sum2 ) );
            console.log( 'SOURCE: ', sum2.toString() );
            const [ result2, sync ] = await sum2( 10, 50 );
            console.log( 'RESULT: ', result2 );
            setTimeout( () => {
                console.log( 'RESULT2: ', sync( [ 'a2' ] ) );
            }, 100 );
        </script>

    </body>
</html>